!function(t,e){"use strict";function o(e,o){var n=t.extend(!0,{duration:200,effect:{open:t.fn.fadeIn,close:t.fn.fadeOut},overlay:{color:"#888",opacity:.6,zIndex:9e3},closeClass:"plainmodal-close"},o);return n.zIndex=n.zIndex||n.overlay.zIndex+1,a||(a=t(window),r=t("<div />").css({position:"fixed",left:0,top:0,width:"100%",height:"100%",display:"none"}).appendTo(c=t("body")).click(l),t(document).focusin(function(e){v&&!v.has(e.target).length&&(s?s.focus():t(document.activeElement).blur())}).keydown(function(t){return 27===t.keyCode?l(t):void 0})),e.each(function(){var e=t(this),o={position:"fixed",display:"none",zIndex:n.zIndex};n.offset?("function"!=typeof n.offset&&(o.left=n.offset.left,o.top=n.offset.top),o.marginLeft=o.marginTop=""):(o.left=o.top="50%",o.marginLeft="-"+e.outerWidth()/2+"px",o.marginTop="-"+e.outerHeight()/2+"px"),n.closeClass&&e.find("."+n.closeClass).off("click",l).click(l),e.css(o).data("plainModal",n).appendTo(c)})}function n(e,n){var l,m,y,x,I,z;return null===v&&e.length&&(l=e.eq(0),(n||!(m=l.data("plainModal")))&&(m=o(l,n).data("plainModal")),y=c.get(0).style,d=y.overflow,x=c.prop("clientWidth"),I=c.prop("clientHeight"),c.css("overflow","hidden"),x-=c.prop("clientWidth"),I-=c.prop("clientHeight"),u=y.marginRight,p=y.marginBottom,0>x&&c.css("marginRight","+="+-x),0>I&&c.css("marginBottom","+="+-I),f=t(document.activeElement).blur(),s=null,g=a.scrollLeft(),h=a.scrollTop(),a.scroll(i),"function"==typeof m.offset&&(z=m.offset.call(l),l.css({left:z.left,top:z.top})),m.effect.open.call(l,m.duration,function(){l.find("a,input,select,textarea,button,object,area,img,map").each(function(){var e=t(this);return e.focus().get(0)===document.activeElement?(s=e,!1):void 0}),v=l}),r.css({backgroundColor:m.overlay.color,zIndex:m.overlay.zIndex}).fadeTo(m.duration,m.overlay.opacity),v=0),e}function l(o){var n,l,s=o instanceof t.Event;return v&&(n=s?v:function(){var t=o.index(v);return t>-1?o.eq(t):e}(),n&&(l=n.data("plainModal"),l.effect.close.call(n,l.duration,function(){c.css({overflow:d,marginRight:u,marginBottom:p}),f&&f.length&&f.focus(),a.off("scroll",i).scrollLeft(g).scrollTop(h),v=null}),r.fadeOut(l.duration),v=0)),s?(o.preventDefault(),!1):o}function i(t){return a.scrollLeft(g).scrollTop(h),t.preventDefault(),!1}var a,c,r,f,s,d,u,p,g,h,v=null;t.fn.plainModal=function(t,e){return"open"===t?n(this,e):"close"===t?l(this):o(this,t)}}(jQuery);