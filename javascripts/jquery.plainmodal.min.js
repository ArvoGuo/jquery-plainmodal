!function(t){function o(o,e){var l=t.extend({duration:200,effect:{open:t.fn.fadeIn,close:t.fn.fadeOut},overlay:{color:"#000",opacity:.3},closeClass:"plainmodal-close"},e);return c=c||t("body"),f=f||t("<div />").css({position:"fixed",left:0,top:0,width:"100%",height:"100%",display:"none",zIndex:9e3}).appendTo(c).click(n),g=g||t(window),o.each(function(){var o=t(this),e={position:"fixed",display:"none",zIndex:9001};l.offset?("function"!=typeof l.offset&&(e.left=l.offset.left,e.top=l.offset.top),e.marginLeft=e.marginTop=""):(e.left=e.top="50%",e.marginLeft="-"+o.outerWidth()/2+"px",e.marginTop="-"+o.outerHeight()/2+"px"),l.closeClass&&o.find("."+l.closeClass).off("click",n).click(n),o.css(e).data("plainModal",l).appendTo(c)})}function e(e,n){var y,w,x,T,k,b;return null===v&&e.length&&(y=e.eq(0),(n||!(w=y.data("plainModal")))&&(w=o(y,n).data("plainModal")),x=c.get(0).style,u=x.overflow,T=c.prop("clientWidth"),k=c.prop("clientHeight"),c.css("overflow","hidden"),T-=c.prop("clientWidth"),k-=c.prop("clientHeight"),d=x.marginRight,p=x.marginBottom,0>T&&c.css("marginRight","+="+-T),0>k&&c.css("marginBottom","+="+-k),r=t(document.activeElement).blur(),s=null,t(document).focusin(l).keydown(i),h=g.scrollLeft(),m=g.scrollTop(),g.scroll(a),"function"==typeof w.offset&&(b=w.offset.call(y),y.css({left:b.left,top:b.top})),w.effect.open.call(y,w.duration,function(){y.find("a,input,select,textarea,button,object,area,img,map").each(function(){var o=t(this);return o.focus().get(0)===document.activeElement?(s=o,!1):void 0}),v=y}),f.css("backgroundColor",w.overlay.color).fadeTo(w.duration,w.overlay.opacity),v=0),e}function n(o){var e;return v&&(e=v.data("plainModal"),e.effect.close.call(v,e.duration,function(){c.css("overflow",u),c.css("marginRight",d),c.css("marginBottom",p),t(document).off("focusin",l).off("keydown",i),r&&r.length&&r.focus(),g.off("scroll",a),g.scrollLeft(h).scrollTop(m),v=null}),f.fadeOut(e.duration),v=0),o instanceof jQuery.Event?(o.preventDefault(),!1):o}function l(o){v&&!v.has(o.target).length&&(s?s.focus():t(document.activeElement).blur())}function i(t){return 27===t.keyCode?(n(),t.preventDefault(),!1):void 0}function a(t){return g.scrollLeft(h).scrollTop(m),t.preventDefault(),!1}var c,f,r,s,u,d,p,g,h,m,v=null;t.fn.plainModal=function(t,l){return"open"===t?e(this,l):"close"===t?n(this):o(this,t)}}(jQuery);