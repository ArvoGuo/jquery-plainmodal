!function(o,e){"use strict";function t(e,t){var n=o.extend(!0,{duration:200,effect:{open:o.fn.fadeIn,close:o.fn.fadeOut},overlay:{opacity:.6,zIndex:9e3},closeClass:"plainmodal-close"},t);return n.overlay.fillColor=n.overlay.fillColor||n.overlay.color||"#888",n.zIndex=n.zIndex||n.overlay.zIndex+1,a||(a=o(window),c=o('<div class="plainmodal-overlay" />').css({position:"fixed",left:0,top:0,width:"100%",height:"100%",display:"none"}).appendTo(r=o("body")).click(l),o(document).focusin(function(e){v&&!v.has(e.target).length&&(s?s.focus():o(document.activeElement).blur())}).keydown(function(o){return v&&27===o.keyCode?l(o):void 0})),e.each(function(){var e=o(this),t={position:"fixed",display:"none",zIndex:n.zIndex};n.offset?("function"!=typeof n.offset&&(t.left=n.offset.left,t.top=n.offset.top),t.marginLeft=t.marginTop=""):(t.left=t.top="50%",t.marginLeft="-"+e.outerWidth()/2+"px",t.marginTop="-"+e.outerHeight()/2+"px"),n.closeClass&&e.find("."+n.closeClass).off("click",l).click(l),"function"==typeof n.open&&e.on("plainmodalopen",n.open),"function"==typeof n.close&&e.on("plainmodalclose",n.close),e.css(t).data("plainModal",n).appendTo(r)})}function n(e,n){var l,h,y,x,I,z;return null===v&&e.length&&(l=e.eq(0),(n||!(h=l.data("plainModal")))&&(h=t(l,n).data("plainModal")),y=r.get(0).style,d=y.overflow,x=r.prop("clientWidth"),I=r.prop("clientHeight"),r.css("overflow","hidden"),x-=r.prop("clientWidth"),I-=r.prop("clientHeight"),p=y.marginRight,u=y.marginBottom,0>x&&r.css("marginRight","+="+-x),0>I&&r.css("marginBottom","+="+-I),f=o(document.activeElement).blur(),s=null,g=a.scrollLeft(),m=a.scrollTop(),a.scroll(i),"function"==typeof h.offset&&(z=h.offset.call(l),l.css({left:z.left,top:z.top})),h.effect.open.call(l,h.duration||1,function(){l.find("a,input,select,textarea,button,object,area,img,map").each(function(){var e=o(this);return e.focus().get(0)===document.activeElement?(s=e,!1):void 0}),v=l.trigger("plainmodalopen")}),c.css({backgroundColor:h.overlay.fillColor,zIndex:h.overlay.zIndex}).fadeTo(h.duration,h.overlay.opacity),v=0),e}function l(t){var n,l,s=t instanceof o.Event;return v&&(n=s?v:function(){var o=t.index(v);return o>-1?t.eq(o):e}(),n&&(l=n.data("plainModal"),l.effect.close.call(n,l.duration||1,function(){r.css({overflow:d,marginRight:p,marginBottom:u}),f&&f.length&&f.focus(),a.off("scroll",i).scrollLeft(g).scrollTop(m),n.trigger("plainmodalclose"),v=null}),c.fadeOut(l.duration),v=0)),s?(t.preventDefault(),!1):t}function i(o){return a.scrollLeft(g).scrollTop(m),o.preventDefault(),!1}var a,r,c,f,s,d,p,u,g,m,v=null;o.fn.plainModal=function(o,e){return"open"===o?n(this,e):"close"===o?l(this):t(this,o)}}(jQuery);