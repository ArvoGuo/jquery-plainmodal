!function(t,o){"use strict";function e(o,e){var n=t.extend({duration:200,effect:{open:t.fn.fadeIn,close:t.fn.fadeOut},overlay:{color:"#000",opacity:.3},closeClass:"plainmodal-close"},e);return a||(a=t(window),f=t("<div />").css({position:"fixed",left:0,top:0,width:"100%",height:"100%",display:"none",zIndex:9e3}).appendTo(c=t("body")).click(l),t(document).focusin(function(o){m&&!m.has(o.target).length&&(s?s.focus():t(document.activeElement).blur())}).keydown(function(t){return 27===t.keyCode?l(t):void 0})),o.each(function(){var o=t(this),e={position:"fixed",display:"none",zIndex:9001};n.offset?("function"!=typeof n.offset&&(e.left=n.offset.left,e.top=n.offset.top),e.marginLeft=e.marginTop=""):(e.left=e.top="50%",e.marginLeft="-"+o.outerWidth()/2+"px",e.marginTop="-"+o.outerHeight()/2+"px"),n.closeClass&&o.find("."+n.closeClass).off("click",l).click(l),o.css(e).data("plainModal",n).appendTo(c)})}function n(o,n){var l,v,y,x,T,w;return null===m&&o.length&&(l=o.eq(0),(n||!(v=l.data("plainModal")))&&(v=e(l,n).data("plainModal")),y=c.get(0).style,u=y.overflow,x=c.prop("clientWidth"),T=c.prop("clientHeight"),c.css("overflow","hidden"),x-=c.prop("clientWidth"),T-=c.prop("clientHeight"),d=y.marginRight,p=y.marginBottom,0>x&&c.css("marginRight","+="+-x),0>T&&c.css("marginBottom","+="+-T),r=t(document.activeElement).blur(),s=null,g=a.scrollLeft(),h=a.scrollTop(),a.scroll(i),"function"==typeof v.offset&&(w=v.offset.call(l),l.css({left:w.left,top:w.top})),v.effect.open.call(l,v.duration,function(){l.find("a,input,select,textarea,button,object,area,img,map").each(function(){var o=t(this);return o.focus().get(0)===document.activeElement?(s=o,!1):void 0}),m=l}),f.css("backgroundColor",v.overlay.color).fadeTo(v.duration,v.overlay.opacity),m=0),o}function l(e){var n,l,s=e instanceof t.Event;return m&&(n=s?m:function(){var t=e.index(m);return t>-1?e.eq(t):o}(),n&&(l=n.data("plainModal"),l.effect.close.call(n,l.duration,function(){c.css({overflow:u,marginRight:d,marginBottom:p}),r&&r.length&&r.focus(),a.off("scroll",i).scrollLeft(g).scrollTop(h),m=null}),f.fadeOut(l.duration),m=0)),s?(e.preventDefault(),!1):e}function i(t){return a.scrollLeft(g).scrollTop(h),t.preventDefault(),!1}var a,c,f,r,s,u,d,p,g,h,m=null;t.fn.plainModal=function(t,o){return"open"===t?n(this,o):"close"===t?l(this):e(this,t)}}(jQuery);