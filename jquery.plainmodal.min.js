!function(e){function t(t,o){var a=e.extend({duration:200,effect:{open:e.fn.fadeIn,close:e.fn.fadeOut},overlay:{color:"#000",opacity:.3},closeClass:"plainmodal-close"},o);return l=l||e("body"),c=c||e("<div />").css({position:"fixed",left:0,top:0,width:"100%",height:"100%",display:"none",zIndex:9e3}).appendTo(l).click(n),t.each(function(){var t=e(this),o={position:"fixed",display:"none",zIndex:9001};a.offset?(o.left=a.offset.left,o.top=a.offset.top,o.marginLeft=o.marginTop=""):(o.left=o.top="50%",o.marginLeft="-"+t.outerWidth()/2+"px",o.marginTop="-"+t.outerHeight()/2+"px"),a.closeClass&&t.find("."+a.closeClass).off("click",n).click(n),t.css(o).data("plainModal",a).appendTo(l)})}function o(o,n){var h,m,v,g;return null===p&&o.length&&(h=o.eq(0),(n||!(m=h.data("plainModal")))&&(m=t(h,n).data("plainModal")),s=l.css("overflow"),v=l.width(),g=l.height(),l.css("overflow","hidden"),v-=l.width(),g-=l.height(),d=u=0,0>v&&l.css("marginRight","+="+(d=-v)),0>g&&l.css("marginBottom","+="+(u=-g)),f=e(document.activeElement),m.effect.open.call(h,m.duration,function(){r=null,h.find("a,input,select,textarea,button,object,area,img,map").each(function(){var t=e(this);return t.focus().get(0)===document.activeElement?(r=t,!1):void 0}),e(document.activeElement).blur(),e(document).focusin(a).keydown(i),p=h}),c.css("backgroundColor",m.overlay.color).fadeTo(m.duration,m.overlay.opacity),p=0),o}function n(t){var o;return p&&(o=p.data("plainModal"),o.effect.close.call(p,o.duration,function(){var t,o,n;e(document).off("focusin",a).off("keydown",i),l.css("overflow",s),d&&l.css("marginRight","-="+d),u&&l.css("marginBottom","-="+u),f&&f.length&&(t=e(window),o=t.scrollLeft(),n=t.scrollTop(),f.focus(),t.scrollLeft(o),t.scrollTop(n)),p=null}),c.fadeOut(o.duration),p=0),t instanceof jQuery.Event?(t.preventDefault(),!1):t}function a(t){p&&!p.has(t.target).length&&(r?r.focus():e(document.activeElement).blur())}function i(e){return 27===e.keyCode?(n(),e.preventDefault(),!1):void 0}var l,c,f,r,s,d,u,p=null;e.fn.plainModal=function(e,a){return"open"===e?o(this,a):"close"===e?n(this):t(this,e)}}(jQuery);